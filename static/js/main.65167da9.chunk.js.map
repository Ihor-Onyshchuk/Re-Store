{"version":3,"sources":["store.js","components/bookListItem/bookListItem.js","components/bookstoreServiceContext/BookstoreServiceContext.js","components/hoc/WithBookstoreService.js","actions/index.js","components/spiner/Spiner.js","components/errorIndicator/ErrorIndicator.js","components/bookList/bookList.js","components/shoppingCartTable/shoppingCartTable.js","components/pages/homePage/homePage.js","components/pages/cartPage/cartPage.js","components/shopHeader/shopHeader.js","components/app/App.js","components/errorBoundry/ErrorBoundry.js","services/BookstoreService.js","reducers/bookList.js","reducers/shoppingCart.js","reducers/index.js","index.js"],"names":["timeout","BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","Spiner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","loading","error","Component","compose","connect","bookList","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","shoppingCart","items","cartItems","total","orderTotal","item","idx","count","withRouter","ShopHeader","numItems","to","href","App","role","path","component","HomePage","exact","CartPage","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateCartItems","slice","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","value","basename","process","document","getElementById"],"mappings":"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","file":"static/js/main.65167da9.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\nimport reducer from \"./reducers\";\nimport thunkMiddleware from \"redux-thunk\";\n\nconst logMiddleware = ({ getState }) => next => action => {\n  console.log(action.type, getState());\n  return next(action);\n};\n\nconst stringMiddleware = () => next => action => {\n  if (typeof action === \"string\") {\n    return next({\n      type: action\n    });\n  }\n\n  return next(action);\n};\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware)\n);\n\nconst deleyedActionCreator = timeout => dispatch => {\n  setTimeout(\n    () =>\n      dispatch({\n        type: \"DELAY_ACTION\"\n      }),\n    timeout\n  );\n};\n\nstore.dispatch(deleyedActionCreator(3000));\n\nexport default store;\n","import React from \"react\";\nimport \"./bookListItem.css\";\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"bookListItem\">\n      <div className=\"bookCover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"bookDetails\">\n        <span className=\"bookTitle\">{title}</span>\n        <div className=\"bookAuthor\">{author}</div>\n        <div className=\"bookPrice\">\n          <span>&#36;{price}</span>\n        </div>\n        <button className=\"btn btn-info add-to-cart\" onClick={onAddedToCart}>\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import React from \"react\";\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport { BookstoreServiceConsumer, BookstoreServiceProvider };\n","import React from \"react\";\nimport { BookstoreServiceConsumer } from \"../bookstoreServiceContext/BookstoreServiceContext\";\n\nconst withBookstoreService = () => Wrapped => {\n  return props => {\n    return (\n      <BookstoreServiceConsumer>\n        {bookstoreService => {\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\n        }}\n      </BookstoreServiceConsumer>\n    );\n  };\n};\n\nexport default withBookstoreService;\n","const booksLoaded = newBooks => {\n  return {\n    type: \"FETCH_BOOKS_LOADED\",\n    payload: newBooks\n  };\n};\n\nconst booksRequested = () => {\n  return {\n    type: \"FETCH_BOOKS_REQUESTED\"\n  };\n};\n\nconst booksError = error => {\n  return {\n    type: \"FETCH_BOOKS_FAILURE\",\n    payload: error\n  };\n};\n\nexport const bookAddedToCart = bookId => {\n  return {\n    type: \"BOOK_ADDED_TO_CART\",\n    payload: bookId\n  };\n};\n\nexport const bookRemovedFromCart = bookId => {\n  return {\n    type: \"BOOK_REMOVED_FROM_CART\",\n    payload: bookId\n  };\n};\n\nexport const allBookRemovedFromCart = bookId => {\n  return {\n    type: \"ALL_BOOK_REMOVED_FROM_CART\",\n    payload: bookId\n  };\n};\n\n// const fetchBooksOld = (bookstoreService, dispatch) => () => {\n//   dispatch(booksRequested());\n//   bookstoreService\n//     .getBooks()\n//     .then(data => dispatch(booksLoaded(data)))\n//     .catch(err => dispatch(booksError(err)));\n// };\n\nconst fetchBooks = bookstoreService => () => dispatch => {\n  dispatch(booksRequested());\n  bookstoreService\n    .getBooks()\n    .then(data => dispatch(booksLoaded(data)))\n    .catch(err => dispatch(booksError(err)));\n};\n\nexport { fetchBooks };\n","import React from \"react\";\nimport \"./Spiner.css\";\n\nconst Spiner = () => {\n  return <div>Loading...</div>;\n};\n\nexport default Spiner;\n","import React from \"react\";\nimport \"./ErrorIndicator.css\";\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import React, { Component } from \"react\";\nimport BooksListItem from \"../bookListItem/bookListItem\";\nimport { connect } from \"react-redux\";\nimport withBookstoreService from \"../hoc/WithBookstoreService\";\nimport { fetchBooks, bookAddedToCart } from \"../../actions/index\";\nimport { compose, bindActionCreators } from \"redux\";\nimport \"./bookList.css\";\nimport Spiner from \"../spiner/Spiner\";\nimport ErrorIndicator from \"../errorIndicator/ErrorIndicator\";\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className=\"bookList\">\n      {books.map(book => {\n        return (\n          <li key={book.id}>\n            <BooksListItem\n              book={book}\n              onAddedToCart={() => onAddedToCart(book.id)}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) return <Spiner />;\n    if (error) return <ErrorIndicator />;\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return bindActionCreators(\n    {\n      fetchBooks: fetchBooks(bookstoreService),\n      onAddedToCart: bookAddedToCart\n    },\n    dispatch\n  );\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);\n","import React from \"react\";\nimport \"./shoppingCartTable.css\";\nimport { connect } from \"react-redux\";\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBookRemovedFromCart\n} from \"../../actions\";\n\nconst ShoppingCartTable = ({\n  items,\n  total,\n  onIncrease,\n  onDecrease,\n  onDelete\n}) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>&#36;{total}</td>\n        <td>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\"\n          >\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm float-right\"\n          >\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDecrease(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\"\n          >\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n  return (\n    <div className=\"shoppingCartTable\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n      <div className=\"total\">Total: &#36;{total}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return { items: cartItems, total: orderTotal };\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemovedFromCart,\n  onDelete: allBookRemovedFromCart\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import React from \"react\";\nimport \"./homePage.css\";\nimport { withRouter } from \"react-router-dom\";\nimport BookList from \"../../bookList/bookList\";\nimport ShoppingCartTable from \"../../shoppingCartTable/shoppingCartTable\";\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default withRouter(HomePage);\n","import React from \"react\";\nimport \"./cartPage.css\";\nimport { withRouter } from \"react-router-dom\";\n\nconst CartPage = () => {\n  return <div>Cart Page</div>;\n};\n\nexport default withRouter(CartPage);\n","import React from \"react\";\nimport \"./shopHeader.css\";\nimport { Link } from \"react-router-dom\";\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className=\"shopHeader row\">\n      <Link to=\"/\">\n        <div className=\"logo text-dark\" href=\"#\">\n          ReStore\n        </div>\n      </Link>\n\n      <Link to=\"/cart\">\n        <div className=\"shoppingCart\">\n          <i className=\"cartIcon fa fa-shopping-cart\" />\n          {numItems} items (&#36;{total})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nexport default ShopHeader;\n","import React from \"react\";\nimport \"./App.css\";\nimport { Route, Switch } from \"react-router-dom\";\nimport HomePage from \"../pages/homePage/homePage\";\nimport CartPage from \"../pages/cartPage/cartPage\";\nimport ShopHeader from \"../shopHeader/shopHeader\";\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader numItems={5} total={210} />\n      <Switch>\n        <Route path=\"/\" component={HomePage} exact />\n        <Route path=\"/cart\" component={CartPage} />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import React, { Component } from \"react\";\nimport ErrorIndicator from \"../errorIndicator/ErrorIndicator\";\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({\n      hasError: true\n    });\n  }\n\n  render() {\n    if (this.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n","export default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: \"Production-Ready Microservices\",\n      author: \"Susan J. Fowler\",\n      price: 32,\n      coverImage:\n        \"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg\"\n    },\n    {\n      id: 2,\n      title: \"Release It!\",\n      author: \"Michael T. Nygard\",\n      price: 45,\n      coverImage:\n        \"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg\"\n    }\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.75) {\n          reject(new Error(\"Something bad happened\"));\n        }\n        resolve(this.data);\n      }, 700);\n    });\n  }\n}\n","const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n  switch (action.type) {\n    case \"FETCH_BOOKS_REQUESTED\":\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n    case \"FETCH_BOOKS_LOADED\":\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList;\n","const updateOrder = (state, bookId, quantity) => {\n  const {\n    bookList: { books },\n    shoppingCart: { cartItems }\n  } = state;\n\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\n\nconst updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return { cartItems: [], orderTotal: 0 };\n  }\n\n  switch (action.type) {\n    case \"BOOK_ADDED_TO_CART\":\n      return updateOrder(state, action.payload, 1);\n\n    case \"BOOK_REMOVED_FROM_CART\":\n      return updateOrder(state, action.payload, -1);\n\n    case \"ALL_BOOK_REMOVED_FROM_CART\":\n      const item = state.shoppingCart.cartItems.find(\n        ({ id }) => id === action.payload\n      );\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","import updateBookList from \"./bookList\";\nimport updateShoppingCart from \"./shoppingCart\";\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  };\n};\n\nexport default reducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport App from \"./components/app/App\";\nimport ErrorBoundry from \"./components/errorBoundry/ErrorBoundry\";\nimport BookstoreService from \"./services/BookstoreService\";\nimport { Provider } from \"react-redux\";\nimport { BookstoreServiceProvider } from \"./components/bookstoreServiceContext/BookstoreServiceContext\";\n\nimport store from \"./store\";\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}